<!doctype html>
<html>
  <head>
    <title>Smile Game</title>
    <style>
      div {
        position: absolute;
        width: 500px;
        height: 500px;
      }

      img {
        position: absolute;
      }

      #rightSide {
        left: 500px;
        border-left: 1px solid black;
      }
    </style>
  </head>
  <body onload="generateFaces()">
    <h1>Matching Game</h1>
    <p>Click on the extra smiling face on the left</p>
    <div id="leftSide"></div>
    <div id="rightSide"></div>
    <script>
      var numberOfFaces = 5;
      var theLeftSide = document.getElementById("leftSide");
      var theRightSide = document.getElementById("rightSide");
      var theBody = document.getElementsByTagName("body")[0];

      function generateFaces() {
        var leftSideImages;
        var i = 0;
        for(i = 0; i < numberOfFaces; i++) {
          var smileyTop = 0;
          var smileyLeft = 0;
          var smiley = document.createElement("img");
          smiley.src = "http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png";
          smiley.width = 100;
          // Get random top and left values
          smileyTop = Math.random() * 401;
          smileyTop = Math.floor(smileyTop);
          smileyLeft = Math.random() * 401;
          smileyLeft = Math.floor(smileyLeft);
          smiley.style.top = smileyTop + "px";
          smiley.style.left = smileyLeft + "px";
          theLeftSide.appendChild(smiley);
        }
        // Copy the leftSide node and paste on the right div
        leftSideImages = theLeftSide.cloneNode(true);
        if(leftSideImages.hasChildNodes()) {
          leftSideImages.removeChild(leftSideImages.lastChild);
          theRightSide.appendChild(leftSideImages);
        }
        // Create event for lastChild on leftSide div
        theLeftSide.lastChild.onclick =
          function nextLevel(event) {
            event.stopPropagation();
            numberOfFaces += 5;
            // Delete all previous nodes left
            while(theLeftSide.hasChildNodes()) {
              theLeftSide.removeChild(theLeftSide.firstChild);
            }
            // delete all previous nodes right
            theRightSide.removeChild(theRightSide.firstChild);
            generateFaces();
          };
      }

      // Create event for wrong player mover
      theBody.onclick = function gameOver() {
        alert("Game Over!");
        theBody.onclick = null;
        theLeftSide.lastChild.onclick = null;
      };
    </script>
  </body>
</html>